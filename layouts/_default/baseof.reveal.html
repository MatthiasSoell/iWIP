<!doctype html>
<html lang="en">
  <head>
    {{ partial "layout/head" . -}}
    {{ partial "layout/theme" . -}}
    {{ $plugins := partial "internal/plugins" . -}}
    {{- range $plugins }}
      {{- with .css }}
      <link rel="stylesheet" href="{{ . | relURL }}">
      {{- end -}}
    {{ end -}}

    <!-- To insert markup before the closing head tag for all presentations -->
    {{- partial "reveal-hugo/head" . -}}

    <!-- To insert markup at the end of the head tag for a specific presentation -->
    {{- $sectionHeadPartial := printf "%s/reveal-hugo/head" (.Page.Section | default "home") -}}
    {{- if fileExists (printf "layouts/partials/%s.html" $sectionHeadPartial) -}}
      {{ partial $sectionHeadPartial . }}
    {{- end }}
  </head>

  <body>
    {{ if .Param "logo.src" }}
    <style>
      #logo {
        position: absolute;
        top: {{ if .Param "logo.top"}}{{ .Param "logo.top" }}{{ else if .Param "logo.diag" }}{{ .Param "logo.diag" }}{{ else }}1%{{ end }};
        left: {{ if .Param "logo.top"}}{{ .Param "logo.left" }}{{ else if .Param "logo.diag" }}{{ .Param "logo.diag" }}{{ else }}1%{{ end }};
        width: {{ if .Param "logo.width"}}{{ .Param "logo.width" }}{{ else }}15%{{ end }};
      }
    </style>
    <img id="logo" src="{{ .Param "logo.src" }}" alt="{{ .Param "logo.alt" }}">
    {{ end }}

    <!-- ===================================================== -->
    <!-- Reveal.js Stage -->
    <!-- ===================================================== -->
    <div class="reveal">
      <div class="slides">
        {{- block "main" . -}}{{- end -}}
      </div>

      <!-- End-Partials (global & sectionspezifisch) -->
      {{- partial "reveal-hugo/end" . -}}
      {{- $sectionHeadPartial := printf "%s/reveal-hugo/end" (.Page.Section | default "home") -}}
      {{- if fileExists (printf "layouts/partials/%s.html" $sectionHeadPartial) -}}
        {{ partial $sectionHeadPartial . }}
      {{- end }}
    </div>

    <!-- ===================================================== -->
    <!-- Globaler SciBlog-Footer außerhalb der Reveal-Bühne -->
    <!-- verhindert Skalierung durch Reveal.js transform -->
    <!-- ===================================================== -->
    <div id="global-footer">
      {{ partial "extend_footer.html" . }}
    </div>

    <!-- JavaScript & Body-End -->
    {{- partial "layout/javascript" . }}
    {{- partial "reveal-hugo/body" . }}
    {{- $sectionBodyPartial := printf "%s/reveal-hugo/body" (.Page.Section | default "home") -}}
    {{- if fileExists (printf "layouts/partials/%s.html" $sectionBodyPartial) -}}
      {{ partial $sectionBodyPartial . }}
    {{- end }}
  </body>
</html>